@extends('layouts.app')
@push('styles')
    <style>
        @media (max-width: 768px) {
            .col-4 {
                flex: 0 0 100%;
                max-width: 100%;
            }
        }
    </style>
@endpush
@section('content')
    @include('pages.post.edit')
    @include('pages.post.show')
    <div class="profile-status">
        <!-- Header Profil -->
        <div class="d-flex foto">
            <!-- Avatar -->
            <div class="me-4 profile-foto">
                <img src="{{ Storage::url($user->avatar ?? asset('default-image.jpg')) }}" alt="Avatar" class="rounded-3"
                    style="object-fit: cover; width: 200px; height: 200px;">
            </div>

            <!-- Informasi Profil -->
            <div class="flex-grow-1" style="line-height: 50px">
                <div class="d-flex gap-4 align-items-center">
                    <p class="pe-5" style="font-size: 75px; font-weight: 700;">{{ $user->name }}</p>
                    @auth
                        @if ($user->id !== auth()->id())
                            <button
                                class="btn follow-btn {{ auth()->user()->followings->contains($user->id) ? 'btn-secondary' : 'btn-primary' }}"
                                data-user-id="{{ $user->id }}" style="font-size: 25px">
                                {{ auth()->user()->followings->contains($user->id) ? 'Unfollow' : 'Follow' }}
                            </button>
                        @else
                            <div class="d-flex align-items-center">
                                <a href="{{ route('account.edit') }}" class="btn btn-secondary me-2"
                                    style="font-size: 25px">Edit Profil</a>
                            </div>
                        @endif
                    @endauth
                </div>
                <p style="font-size: 48px">{{ '@' . $user->username }}</p>
                <p style="font-size: 32px">{{ $user->bio ?? '' }}</p>
            </div>
        </div>
        <div class="d-flex justify-evenly w-100 mt-4">
            <div class="">
                <p class="text-center" style="line-height: 20px; font-size: 30px;">
                    {{ $user->posts->count() }} <br>
                    Posts
                </p>
            </div>
            <div class="" data-bs-toggle="modal" data-bs-target="#followersModal" style="cursor: pointer;">
                <p class="text-center" style="line-height: 20px; font-size: 30px;">
                    {{ $user->followers->count() }} <br>
                    Followers
                </p>
            </div>
            <div class="" data-bs-toggle="modal" data-bs-target="#followingsModal" style="cursor: pointer;">
                <p class="text-center" style="line-height: 20px; font-size: 30px;">
                    {{ $user->followings->count() }} <br>
                    Followings
                </p>
            </div>
        </div>
        <hr class="my-3">
        <!-- Tab Navigation -->
        <ul class="nav nav-tabs mb-4 justify-between" id="profileTab" role="tablist">
            <li class="nav-item w-50" role="presentation">
                <button class=" d-flex nav-link active w-100 justify-center" id="snapee-tab" data-bs-toggle="tab"
                    data-bs-target="#snapee" type="button" role="tab" aria-controls="snapee" aria-selected="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="41" height="35" viewBox="0 0 41 35"
                        fill="none">
                        <path
                            d="M26.7803 1C29.579 1.00009 32.0099 2.56705 33.2422 4.86914H37.0752C38.6912 4.86925 39.9997 6.17624 40 7.78809V27.249C40 28.8611 38.6914 30.1679 37.0752 30.168H33.334L35.6006 32.4297C35.9813 32.8097 35.9813 33.4266 35.6006 33.8066C35.2199 34.186 34.6033 34.186 34.2227 33.8066L30.5762 30.168H3.9248C2.30859 30.1679 1 28.8611 1 27.249V7.78809C1.00028 6.17624 2.30876 4.86925 3.9248 4.86914H20.3184C21.5729 2.52105 24.0358 1 26.7803 1ZM3.9248 6.81543C3.38601 6.81547 2.95054 7.25075 2.9502 7.78809V24.7373L14.5957 13.1172C15.0525 12.6615 15.7922 12.6615 16.249 13.1172L25.1709 22.0205L28.2441 18.9551C28.6995 18.5006 29.4333 18.5005 29.9004 18.9551L35.6318 24.6758C36.0125 25.0558 36.0117 25.6728 35.6309 26.0527C35.25 26.4323 34.6325 26.4317 34.252 26.0518L29.0723 20.8809L26.5498 23.3975L31.3848 28.2227H37.0752C37.6141 28.2225 38.0498 27.7866 38.0498 27.249V7.78809C38.0495 7.25082 37.6139 6.8156 37.0752 6.81543H33.9492C34.0492 7.29656 34.1025 7.79497 34.1025 8.30566C34.1025 12.3404 30.8244 15.6112 26.7803 15.6113C23.3494 15.6113 20.4002 13.2377 19.6445 9.94336C19.5244 9.41952 19.8521 8.89727 20.377 8.77734C20.9017 8.65746 21.4246 8.98513 21.5449 9.50879C22.0987 11.923 24.2634 13.665 26.7803 13.665C29.7475 13.6649 32.1523 11.2655 32.1523 8.30566C32.1523 7.78843 32.0775 7.28863 31.9404 6.81543H3.9248ZM2.97461 27.4639C3.07237 27.8982 3.45977 28.2226 3.9248 28.2227H28.627L15.4219 15.0439L2.97461 27.4639ZM26.7803 2.94629C25.15 2.94629 23.655 3.67707 22.6562 4.86914H30.9023C29.917 3.69393 28.4364 2.94636 26.7803 2.94629Z"
                            fill="black" />
                        <path
                            d="M26.7803 1L26.7803 0.5H26.7803V1ZM33.2422 4.86914L32.8014 5.10511L32.9427 5.36914H33.2422V4.86914ZM37.0752 4.86914L37.0752 4.36914H37.0752V4.86914ZM40 7.78809H40.5V7.788L40 7.78809ZM37.0752 30.168V30.668H37.0752L37.0752 30.168ZM33.334 30.168V29.668H32.125L32.9808 30.5219L33.334 30.168ZM35.6006 32.4297L35.9538 32.0758L35.9538 32.0758L35.6006 32.4297ZM35.6006 33.8066L35.9535 34.1608L35.9538 34.1605L35.6006 33.8066ZM34.2227 33.8066L33.8695 34.1606L33.8697 34.1608L34.2227 33.8066ZM30.5762 30.168L30.9293 29.814L30.783 29.668H30.5762V30.168ZM3.9248 30.168L3.92477 30.668H3.9248V30.168ZM1 7.78809L0.5 7.788V7.78809H1ZM3.9248 4.86914V4.36914H3.92477L3.9248 4.86914ZM20.3184 4.86914V5.36914H20.6181L20.7594 5.10477L20.3184 4.86914ZM3.9248 6.81543V6.31543H3.92476L3.9248 6.81543ZM2.9502 7.78809L2.4502 7.78776V7.78809H2.9502ZM2.9502 24.7373H2.4502V25.9426L3.30336 25.0912L2.9502 24.7373ZM14.5957 13.1172L14.2426 12.7632L14.2425 12.7632L14.5957 13.1172ZM16.249 13.1172L16.6022 12.7633L16.6022 12.7632L16.249 13.1172ZM25.1709 22.0205L24.8177 22.3744L25.1708 22.7268L25.524 22.3745L25.1709 22.0205ZM28.2441 18.9551L28.5972 19.3091L28.5973 19.309L28.2441 18.9551ZM29.9004 18.9551L30.2536 18.6012L30.2491 18.5968L29.9004 18.9551ZM35.6318 24.6758L35.9851 24.3219L35.9851 24.3219L35.6318 24.6758ZM35.6309 26.0527L35.9838 26.4069L35.984 26.4067L35.6309 26.0527ZM34.252 26.0518L34.6052 25.6979L34.6052 25.6979L34.252 26.0518ZM29.0723 20.8809L29.4255 20.527L29.0724 20.1745L28.7191 20.5269L29.0723 20.8809ZM26.5498 23.3975L26.1967 23.0435L25.8419 23.3974L26.1966 23.7514L26.5498 23.3975ZM31.3848 28.2227L31.0316 28.5766L31.178 28.7227H31.3848V28.2227ZM37.0752 28.2227V28.7227H37.0753L37.0752 28.2227ZM38.0498 7.78809H38.5498V7.78776L38.0498 7.78809ZM37.0752 6.81543L37.0753 6.31543H37.0752V6.81543ZM33.9492 6.81543V6.31543H33.3347L33.4597 6.91712L33.9492 6.81543ZM34.1025 8.30566L34.6025 8.30567V8.30566H34.1025ZM26.7803 15.6113V16.1113H26.7803L26.7803 15.6113ZM19.6445 9.94336L19.1572 10.0551L19.1572 10.0551L19.6445 9.94336ZM20.377 8.77734L20.2656 8.2899L20.2656 8.2899L20.377 8.77734ZM21.5449 9.50879L22.0323 9.39701L22.0322 9.39684L21.5449 9.50879ZM26.7803 13.665V14.165H26.7803L26.7803 13.665ZM32.1523 8.30566L32.6523 8.30567V8.30566H32.1523ZM31.9404 6.81543L32.4207 6.67635L32.3162 6.31543H31.9404V6.81543ZM2.97461 27.4639L2.62144 27.1099L2.42627 27.3047L2.48681 27.5737L2.97461 27.4639ZM3.9248 28.2227L3.92476 28.7227H3.9248V28.2227ZM28.627 28.2227V28.7227H29.8358L28.9802 27.8687L28.627 28.2227ZM15.4219 15.0439L15.7751 14.69L15.4219 14.3376L15.0687 14.69L15.4219 15.0439ZM26.7803 2.94629L26.7803 2.44629H26.7803V2.94629ZM22.6562 4.86914L22.273 4.54803L21.585 5.36914H22.6562V4.86914ZM30.9023 4.86914V5.36914H31.9741L31.2855 4.54789L30.9023 4.86914ZM26.7803 1L26.7803 1.5C29.3877 1.50009 31.6528 2.95935 32.8014 5.10511L33.2422 4.86914L33.683 4.63317C32.367 2.17474 29.7703 0.5001 26.7803 0.5L26.7803 1ZM33.2422 4.86914V5.36914H37.0752V4.86914V4.36914H33.2422V4.86914ZM37.0752 4.86914L37.0752 5.36914C38.4159 5.36923 39.4998 6.45319 39.5 7.78817L40 7.78809L40.5 7.788C40.4997 5.89929 38.9666 4.36926 37.0752 4.36914L37.0752 4.86914ZM40 7.78809H39.5V27.249H40H40.5V7.78809H40ZM40 27.249H39.5C39.5 28.5841 38.4161 29.6679 37.0752 29.668L37.0752 30.168L37.0752 30.668C38.9667 30.6678 40.5 29.1381 40.5 27.249H40ZM37.0752 30.168V29.668H33.334V30.168V30.668H37.0752V30.168ZM33.334 30.168L32.9808 30.5219L35.2474 32.7836L35.6006 32.4297L35.9538 32.0758L33.6872 29.814L33.334 30.168ZM35.6006 32.4297L35.2474 32.7836C35.4324 32.9682 35.4324 33.2681 35.2474 33.4527L35.6006 33.8066L35.9538 34.1605C36.5303 33.5852 36.5303 32.6511 35.9538 32.0758L35.6006 32.4297ZM35.6006 33.8066L35.2476 33.4525C35.0621 33.6374 34.7611 33.6374 34.5756 33.4525L34.2227 33.8066L33.8697 34.1608C34.4455 34.7347 35.3778 34.7346 35.9535 34.1608L35.6006 33.8066ZM34.2227 33.8066L34.5758 33.4527L30.9293 29.814L30.5762 30.168L30.223 30.5219L33.8695 34.1606L34.2227 33.8066ZM30.5762 30.168V29.668H3.9248V30.168V30.668H30.5762V30.168ZM3.9248 30.168L3.92484 29.668C2.58386 29.6679 1.5 28.5841 1.5 27.249H1H0.5C0.5 29.1381 2.03332 30.6678 3.92477 30.668L3.9248 30.168ZM1 27.249H1.5V7.78809H1H0.5V27.249H1ZM1 7.78809L1.5 7.78817C1.50023 6.45319 2.58412 5.36923 3.92484 5.36914L3.9248 4.86914L3.92477 4.36914C2.0334 4.36926 0.50033 5.89929 0.5 7.788L1 7.78809ZM3.9248 4.86914V5.36914H20.3184V4.86914V4.36914H3.9248V4.86914ZM20.3184 4.86914L20.7594 5.10477C21.9282 2.91717 24.2228 1.5 26.7803 1.5V1V0.5C23.8487 0.5 21.2177 2.12493 19.8774 4.63352L20.3184 4.86914ZM3.9248 6.81543L3.92476 6.31543C3.11042 6.31549 2.45072 6.97397 2.4502 7.78776L2.9502 7.78809L3.4502 7.78841C3.45036 7.52752 3.6616 7.31545 3.92484 7.31543L3.9248 6.81543ZM2.9502 7.78809H2.4502V24.7373H2.9502H3.4502V7.78809H2.9502ZM2.9502 24.7373L3.30336 25.0912L14.9489 13.4711L14.5957 13.1172L14.2425 12.7632L2.59703 24.3834L2.9502 24.7373ZM14.5957 13.1172L14.9489 13.4711C15.2105 13.2101 15.6343 13.2101 15.8959 13.4711L16.249 13.1172L16.6022 12.7632C15.9502 12.1128 14.8945 12.1128 14.2426 12.7632L14.5957 13.1172ZM16.249 13.1172L15.8958 13.4711L24.8177 22.3744L25.1709 22.0205L25.5241 21.6666L16.6022 12.7633L16.249 13.1172ZM25.1709 22.0205L25.524 22.3745L28.5972 19.3091L28.2441 18.9551L27.891 18.6011L24.8178 21.6665L25.1709 22.0205ZM28.2441 18.9551L28.5973 19.309C28.8551 19.0517 29.2763 19.0454 29.5517 19.3134L29.9004 18.9551L30.2491 18.5968C29.5904 17.9557 28.5439 17.9496 27.8909 18.6012L28.2441 18.9551ZM29.9004 18.9551L29.5472 19.309L35.2786 25.0297L35.6318 24.6758L35.9851 24.3219L30.2536 18.6012L29.9004 18.9551ZM35.6318 24.6758L35.2786 25.0296C35.4631 25.2138 35.4633 25.5136 35.2777 25.6988L35.6309 26.0527L35.984 26.4067C36.5601 25.832 36.562 24.8979 35.9851 24.3219L35.6318 24.6758ZM35.6309 26.0527L35.2779 25.6986C35.0925 25.8833 34.791 25.8833 34.6052 25.6979L34.252 26.0518L33.8987 26.4056C34.4741 26.9801 35.4075 26.9813 35.9838 26.4069L35.6309 26.0527ZM34.252 26.0518L34.6052 25.6979L29.4255 20.527L29.0723 20.8809L28.719 21.2347L33.8987 26.4056L34.252 26.0518ZM29.0723 20.8809L28.7191 20.5269L26.1967 23.0435L26.5498 23.3975L26.9029 23.7514L29.4254 21.2348L29.0723 20.8809ZM26.5498 23.3975L26.1966 23.7514L31.0316 28.5766L31.3848 28.2227L31.738 27.8687L26.903 23.0436L26.5498 23.3975ZM31.3848 28.2227V28.7227H37.0752V28.2227V27.7227H31.3848V28.2227ZM37.0752 28.2227L37.0753 28.7227C37.8899 28.7224 38.5498 28.0631 38.5498 27.249H38.0498H37.5498C37.5498 27.5101 37.3383 27.7226 37.075 27.7227L37.0752 28.2227ZM38.0498 27.249H38.5498V7.78809H38.0498H37.5498V27.249H38.0498ZM38.0498 7.78809L38.5498 7.78776C38.5493 6.97393 37.8894 6.31568 37.0753 6.31543L37.0752 6.81543L37.075 7.31543C37.3384 7.31551 37.5496 7.52771 37.5498 7.78841L38.0498 7.78809ZM37.0752 6.81543V6.31543H33.9492V6.81543V7.31543H37.0752V6.81543ZM33.9492 6.81543L33.4597 6.91712C33.5528 7.36557 33.6025 7.82991 33.6025 8.30566H34.1025H34.6025C34.6025 7.76002 34.5455 7.22755 34.4388 6.71374L33.9492 6.81543ZM34.1025 8.30566L33.6025 8.30566C33.6025 12.0632 30.5493 15.1112 26.7803 15.1113L26.7803 15.6113L26.7803 16.1113C31.0994 16.1112 34.6025 12.6176 34.6025 8.30567L34.1025 8.30566ZM26.7803 15.6113V15.1113C23.5829 15.1113 20.8355 12.8992 20.1319 9.83157L19.6445 9.94336L19.1572 10.0551C19.9649 13.5763 23.116 16.1113 26.7803 16.1113V15.6113ZM19.6445 9.94336L20.1319 9.83158C20.0736 9.57737 20.2325 9.32324 20.4883 9.26478L20.377 8.77734L20.2656 8.2899C19.4716 8.4713 18.9752 9.26167 19.1572 10.0551L19.6445 9.94336ZM20.377 8.77734L20.4883 9.26479C20.7447 9.20622 20.9992 9.36654 21.0576 9.62074L21.5449 9.50879L22.0322 9.39684C21.85 8.60373 21.0588 8.10869 20.2656 8.2899L20.377 8.77734ZM21.5449 9.50879L21.0576 9.62057C21.6634 12.2618 24.0301 14.165 26.7803 14.165V13.665V13.165C24.4967 13.165 22.534 11.5843 22.0323 9.39701L21.5449 9.50879ZM26.7803 13.665L26.7803 14.165C30.0225 14.1649 32.6523 11.5428 32.6523 8.30567L32.1523 8.30566L31.6523 8.30566C31.6523 10.9883 29.4725 13.1649 26.7803 13.165L26.7803 13.665ZM32.1523 8.30566H32.6523C32.6523 7.73991 32.5704 7.19332 32.4207 6.67635L31.9404 6.81543L31.4602 6.95451C31.5845 7.38393 31.6523 7.83695 31.6523 8.30566H32.1523ZM31.9404 6.81543V6.31543H3.9248V6.81543V7.31543H31.9404V6.81543ZM2.97461 27.4639L2.48681 27.5737C2.6348 28.2311 3.22084 28.7226 3.92476 28.7227L3.9248 28.2227L3.92484 27.7227C3.69871 27.7226 3.50994 27.5653 3.4624 27.3541L2.97461 27.4639ZM3.9248 28.2227V28.7227H28.627V28.2227V27.7227H3.9248V28.2227ZM28.627 28.2227L28.9802 27.8687L15.7751 14.69L15.4219 15.0439L15.0687 15.3979L28.2738 28.5766L28.627 28.2227ZM15.4219 15.0439L15.0687 14.69L2.62144 27.1099L2.97461 27.4639L3.32777 27.8178L15.775 15.3979L15.4219 15.0439ZM26.7803 2.94629V2.44629C24.9988 2.44629 23.3646 3.24513 22.273 4.54803L22.6562 4.86914L23.0395 5.19025C23.9454 4.10902 25.3012 3.44629 26.7803 3.44629V2.94629ZM22.6562 4.86914V5.36914H30.9023V4.86914V4.36914H22.6562V4.86914ZM30.9023 4.86914L31.2855 4.54789C30.2091 3.26407 28.5903 2.44637 26.7803 2.44629L26.7803 2.94629L26.7803 3.44629C28.2825 3.44636 29.6249 4.1238 30.5192 5.19039L30.9023 4.86914Z"
                            fill="black" />
                    </svg>
                </button>
            </li>
            <li class="nav-item w-50" role="presentation">
                <button class="nav-link w-100 d-flex justify-center" id="textee-tab" data-bs-toggle="tab"
                    data-bs-target="#textee" type="button" role="tab" aria-controls="textee" aria-selected="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"
                        fill="none">
                        <path
                            d="M35.4463 1C37.4076 1 38.999 2.41895 38.999 4.16797V31.3701C38.999 31.862 38.8716 32.3459 38.625 32.7891L35.5332 38.2959C35.2696 38.7725 34.7528 39.0057 34.2402 39H2.18359C1.52965 39 1 38.5265 1 37.9434C1.00013 37.3603 1.52973 36.8877 2.18359 36.8877H32.1982L29.8975 32.7861C29.6528 32.3466 29.5254 31.8622 29.5254 31.3721V4.16797C29.5254 2.41899 31.1169 1.00006 33.0781 1H35.4463ZM33.6758 36.8877H34.2686C34.5305 36.8907 34.7712 36.9704 34.9658 37.1016L34.2607 35.8438L33.6758 36.8877ZM31.9219 31.5947C31.9427 31.681 31.9738 31.7652 32.0176 31.8438L34.2607 35.8438L36.5049 31.8467C36.5495 31.7664 36.5817 31.6817 36.6025 31.5947H31.9219ZM33.0781 3.1123C32.4249 3.11235 31.8936 3.5854 31.8936 4.16797V29.4824H36.6299V4.16797C36.6299 3.58546 36.0995 3.11244 35.4463 3.1123H33.0781Z"
                            fill="black" />
                        <path
                            d="M38.999 4.16797H39.499V4.16797L38.999 4.16797ZM38.625 32.7891L39.061 33.0338L39.0619 33.0322L38.625 32.7891ZM35.5332 38.2959L35.0972 38.0511L35.0957 38.0539L35.5332 38.2959ZM34.2402 39L34.2458 38.5H34.2402V39ZM2.18359 39L2.18355 39.5H2.18359V39ZM1 37.9434L0.5 37.9432V37.9434H1ZM2.18359 36.8877V36.3877H2.18355L2.18359 36.8877ZM32.1982 36.8877V37.3877H33.052L32.6343 36.6431L32.1982 36.8877ZM29.8975 32.7861L29.4606 33.0293L29.4614 33.0308L29.8975 32.7861ZM29.5254 4.16797L29.0254 4.16797V4.16797H29.5254ZM33.0781 1V0.5H33.0781L33.0781 1ZM33.6758 36.8877L33.2396 36.6433L32.8225 37.3877H33.6758V36.8877ZM34.2686 36.8877L34.2742 36.3877H34.2686V36.8877ZM34.9658 37.1016L34.6864 37.5162L35.402 36.8571L34.9658 37.1016ZM31.9219 31.5947V31.0947H31.2869L31.4358 31.712L31.9219 31.5947ZM32.0176 31.8438L31.5807 32.0869L31.5815 32.0883L32.0176 31.8438ZM36.5049 31.8467L36.9409 32.0915L36.9418 32.0898L36.5049 31.8467ZM36.6025 31.5947L37.0888 31.7112L37.2364 31.0947H36.6025V31.5947ZM33.0781 3.1123V2.6123H33.0781L33.0781 3.1123ZM31.8936 4.16797L31.3936 4.16795V4.16797H31.8936ZM31.8936 29.4824H31.3936V29.9824H31.8936V29.4824ZM36.6299 29.4824V29.9824H37.1299V29.4824H36.6299ZM36.6299 4.16797H37.1299V4.16795L36.6299 4.16797ZM35.4463 3.1123L35.4464 2.6123H35.4463V3.1123ZM35.4463 1V1.5C37.1869 1.5 38.499 2.74745 38.499 4.16797L38.999 4.16797L39.499 4.16797C39.499 2.09045 37.6283 0.5 35.4463 0.5V1ZM38.999 4.16797H38.499V31.3701H38.999H39.499V4.16797H38.999ZM38.999 31.3701H38.499C38.499 31.7743 38.3946 32.1749 38.1881 32.5459L38.625 32.7891L39.0619 33.0322C39.3487 32.517 39.499 31.9496 39.499 31.3701H38.999ZM38.625 32.7891L38.189 32.5443L35.0972 38.0511L35.5332 38.2959L35.9692 38.5407L39.061 33.0338L38.625 32.7891ZM35.5332 38.2959L35.0957 38.0539C34.9389 38.3374 34.6144 38.5041 34.2458 38.5L34.2402 39L34.2347 39.5C34.8912 39.5072 35.6003 39.2077 35.9707 38.5379L35.5332 38.2959ZM34.2402 39V38.5H2.18359V39V39.5H34.2402V39ZM2.18359 39L2.18363 38.5C1.75111 38.5 1.5 38.1987 1.5 37.9434H1H0.5C0.5 38.8544 1.30818 39.4999 2.18355 39.5L2.18359 39ZM1 37.9434L1.5 37.9435C1.50006 37.6886 1.75068 37.3877 2.18363 37.3877L2.18359 36.8877L2.18355 36.3877C1.30878 36.3878 0.500203 37.032 0.5 37.9432L1 37.9434ZM2.18359 36.8877V37.3877H32.1982V36.8877V36.3877H2.18359V36.8877ZM32.1982 36.8877L32.6343 36.6431L30.3335 32.5415L29.8975 32.7861L29.4614 33.0308L31.7622 37.1323L32.1982 36.8877ZM29.8975 32.7861L30.3343 32.543C30.13 32.1758 30.0254 31.7748 30.0254 31.3721H29.5254H29.0254C29.0254 31.9496 29.1757 32.5175 29.4606 33.0293L29.8975 32.7861ZM29.5254 31.3721H30.0254V4.16797H29.5254H29.0254V31.3721H29.5254ZM29.5254 4.16797L30.0254 4.16797C30.0254 2.7475 31.3376 1.50005 33.0781 1.5L33.0781 1L33.0781 0.5C30.8962 0.500069 29.0254 2.09047 29.0254 4.16797L29.5254 4.16797ZM33.0781 1V1.5H35.4463V1V0.5H33.0781V1ZM33.6758 36.8877V37.3877H34.2686V36.8877V36.3877H33.6758V36.8877ZM34.2686 36.8877L34.2629 37.3877C34.4263 37.3895 34.5721 37.4391 34.6864 37.5162L34.9658 37.1016L35.2452 36.6869C34.9704 36.5017 34.6346 36.3918 34.2742 36.3877L34.2686 36.8877ZM34.9658 37.1016L35.402 36.8571L34.6969 35.5993L34.2607 35.8438L33.8246 36.0882L34.5297 37.3461L34.9658 37.1016ZM34.2607 35.8438L33.8246 35.5993L33.2396 36.6433L33.6758 36.8877L34.112 37.1321L34.6969 36.0882L34.2607 35.8438ZM31.9219 31.5947L31.4358 31.712C31.4659 31.8366 31.5123 31.9639 31.5807 32.0869L32.0176 31.8438L32.4545 31.6006C32.4354 31.5664 32.4195 31.5255 32.4079 31.4774L31.9219 31.5947ZM32.0176 31.8438L31.5815 32.0883L33.8246 36.0883L34.2607 35.8438L34.6968 35.5992L32.4537 31.5992L32.0176 31.8438ZM34.2607 35.8438L34.6967 36.0885L36.9409 32.0915L36.5049 31.8467L36.0689 31.6019L33.8248 35.599L34.2607 35.8438ZM36.5049 31.8467L36.9418 32.0898C37.0097 31.9678 37.0579 31.8402 37.0888 31.7112L36.6025 31.5947L36.1163 31.4783C36.1055 31.5232 36.0894 31.5651 36.068 31.6036L36.5049 31.8467ZM36.6025 31.5947V31.0947H31.9219V31.5947V32.0947H36.6025V31.5947ZM33.0781 3.1123L33.0781 2.6123C32.2046 2.61236 31.3936 3.25653 31.3936 4.16795L31.8936 4.16797L32.3936 4.16799C32.3936 3.91428 32.6452 3.61233 33.0782 3.6123L33.0781 3.1123ZM31.8936 4.16797H31.3936V29.4824H31.8936H32.3936V4.16797H31.8936ZM31.8936 29.4824V29.9824H36.6299V29.4824V28.9824H31.8936V29.4824ZM36.6299 29.4824H37.1299V4.16797H36.6299H36.1299V29.4824H36.6299ZM36.6299 4.16797L37.1299 4.16795C37.1298 3.25703 36.3203 2.61249 35.4464 2.6123L35.4463 3.1123L35.4462 3.6123C35.8787 3.6124 36.1299 3.9139 36.1299 4.16799L36.6299 4.16797ZM35.4463 3.1123V2.6123H33.0781V3.1123V3.6123H35.4463V3.1123Z"
                            fill="black" />
                    </svg>
                </button>
            </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content" id="profileTabContent">
            <!-- Snapee Tab -->
            <div class="tab-pane fade show active" id="snapee" role="tabpanel" aria-labelledby="snapee-tab">
                <div class="row gap-0 ps-3">
                    @foreach ($posts as $post)
                        @if ($post->media->isNotEmpty())
                            <div class="col-4 p-0">
                                <div data-bs-toggle="modal" data-bs-target="#showPostModal{{ $post->id }}"
                                    class="d-block h-100" style="cursor: pointer;">
                                    <div class="position-relative h-100" style="min-height: 350px; max-height: 350px;">
                                        @php
                                            $firstMedia = $post->media->first();
                                            $imageUrl =
                                                $firstMedia->type === 'video' && $firstMedia->thumbnail_url
                                                    ? $firstMedia->thumbnail_url
                                                    : Storage::url($firstMedia->file_url);
                                        @endphp

                                        <img src="{{ $imageUrl }}" alt="Post Media" class="img-fluid w-100 h-100"
                                            style="object-fit: cover;">
                                    </div>
                                </div>
                            </div>
                        @endif
                    @endforeach
                </div>
            </div>

            <!-- Textee Tab -->
            <div class="tab-pane fade" id="textee" role="tabpanel" aria-labelledby="textee-tab">
                <div class="d-flex flex-column gap-3">
                    @foreach ($posts as $post)
                        @if ($post->media->isEmpty())
                            <div class="card">
                                <div class="card-body">
                                    <!-- Profil dan Caption -->
                                    <div class="gap-2">
                                        <!-- Avatar dan Username -->
                                        <div class="d-flex align-items-center profile">
                                            <img src="{{ Storage::url($post->user->avatar ?? 'default-image.jpg') }}"
                                                alt="Avatar" style="object-fit: cover; width: 42px; height: 42px;"
                                                class="rounded-circle me-2">
                                            <a href="{{ route('user.show', $post->user->username) }}"
                                                class="text-decoration-none"
                                                style="font-size: 38px; font-weight: 400">{{ $post->user->username }}</a>

                                            <!-- Tampilkan Collaborator -->
                                            @if ($post->collaborators->count() > 0)
                                                <span class="mx-1" style="font-size: 38px">&</span>
                                                <a href="{{ route('user.show', $post->collaborators->first()->username) }}"
                                                    class="text-decoration-none"
                                                    style="font-size: 38px; font-weight: 400">{{ $post->collaborators->first()->username }}</a>
                                                @if ($post->collaborators->count() > 1)
                                                    <span
                                                        class="text-muted">+{{ $post->collaborators->count() - 1 }}</span>
                                                @endif
                                            @endif

                                            <span class="mx-1">â€¢</span>
                                            <span class="text-muted"
                                                style="font-size: 32px">{{ $post->created_at->diffForHumans() }}</span>

                                            <!-- Menu Titik Tiga untuk Edit/Hapus -->
                                            @if ($post->user_id === auth()->id())
                                                <div class="dropdown ms-auto">
                                                    <button class="btn btn-link p-0" type="button"
                                                        data-bs-toggle="dropdown" aria-expanded="false">
                                                        <i class="fa-solid fa-ellipsis-vertical" style="color: black"></i>
                                                    </button>
                                                    <ul class="dropdown-menu">
                                                        <li>
                                                            <button type="button" class="dropdown-item"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#editPostModal{{ $post->id }}"
                                                                style="font-size: 25px">
                                                                Edit
                                                            </button>
                                                        </li>
                                                        <hr>
                                                        <li>
                                                            <form action="{{ route('posts.destroy', $post->id) }}"
                                                                method="GET">
                                                                @csrf
                                                                <button type="submit" class="dropdown-item text-danger"
                                                                    style="font-size: 25px">Delete</button>
                                                            </form>
                                                        </li>
                                                    </ul>
                                                </div>
                                            @endif
                                        </div>

                                        <!-- Caption -->
                                        <div data-bs-toggle="modal" data-bs-target="#showPostModal{{ $post->id }}">
                                            <p class="caption-text ps-5" style="font-size: 32px">
                                                @php
                                                    $parsed = preg_replace_callback(
                                                        '/@([\w]+)/',
                                                        function ($matches) {
                                                            $username = e($matches[1]);
                                                            $url = url("/{$username}");
                                                            return "<a href=\"{$url}\" class=\"text-primary\">@{$username}</a>";
                                                        },
                                                        e($post->caption),
                                                    );
                                                @endphp
                                                {!! $parsed !!}
                                            </p>
                                        </div>
                                        <div class="ps-5">
                                            @include('components.like-comments')
                                        </div>
                                    </div>
                                </div>
                            </div>
                        @endif
                    @endforeach
                </div>
            </div>
        </div>

    </div>
@endsection

@push('scripts')
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const snapeeBtn = document.getElementById('snapee-tab');
            const texteeBtn = document.getElementById('textee-tab');
            const snapeeSvgPaths = snapeeBtn.querySelectorAll('svg path');
            const texteeSvgPaths = texteeBtn.querySelectorAll('svg path');

            function setSvgColor(paths, color) {
                paths.forEach(path => {
                    path.setAttribute('fill', color);
                });
            }

            // Fungsi untuk mereset warna semua tab
            function resetTabColors() {
                setSvgColor(snapeeSvgPaths, '#888'); // Warna abu-abu default
                setSvgColor(texteeSvgPaths, '#888');
            }

            snapeeBtn.addEventListener('click', () => {
                resetTabColors();
                setSvgColor(snapeeSvgPaths, 'black'); // Warna hitam untuk tab aktif
            });

            texteeBtn.addEventListener('click', () => {
                resetTabColors();
                setSvgColor(texteeSvgPaths, 'black'); // Warna hitam untuk tab aktif
            });

            // Set default: Snapee sebagai aktif
            setSvgColor(snapeeSvgPaths, 'black');
            setSvgColor(texteeSvgPaths, '#888');
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.body.addEventListener('click', function(e) {
                if (e.target.classList.contains('follow-btn')) {
                    const button = e.target;
                    const userId = button.dataset.userId;
                    fetch(`/follow/follow-toggle/${userId}`, {
                            method: 'POST',
                            headers: {
                                'X-CSRF-TOKEN': '{{ csrf_token() }}',
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            }
                        })
                        .then(response => response.json())
                        .then(data => {
                            // Refresh page after follow/unfollow
                            window.location.reload();
                        })
                        .catch(error => {
                            console.error('Gagal toggle follow:', error);
                        });
                }
            });
        });
    </script>
@endpush
